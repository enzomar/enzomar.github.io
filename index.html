
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vincenzo Marafioti</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="assets/js/jquery.slim.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<main role="main" class="container">
  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-8">Experiments, ideas, tooling, ...</h1>
      <p class="lead">by Vincenzo Marafioti</p>
    </div>
  </div>

<!--
  <p class="bg-light-subtle p-3 rounded">
  Dear reader, welcome. <br/>
    &nbsp;  &nbsp;On this page, I share with you some of the side-project I carried out till now. I made them as a hobby or because I wanted to learn new technology, and sometimes were actually useful. I hope you would have a look and give me feedback. 
  <br/>
  Cheers.
  </p>
  <hr> -->

  <div id="filter" class="btn-group">
  </div>

  <div class="container">

    <div id="projects" class="row flex-row flex-sm-nowrap py-3">
      
      <div id="idea" class="shadow-sm col-sm-6 col-md-4 col-xl-3"> <!-- Idea -->
        <h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Idea</h6>
      </div>

      <div id="in_progress" class="shadow-sm col-sm-6 col-md-4 col-xl-3"> 
        <h6 class="card-title text-uppercase text-truncate py-2 text-secondary">In Progress</h6>
      </div>
      
      <div id="almost_done" class="shadow-sm col-sm-6 col-md-4 col-xl-3"> 
        <h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Almost Done</h6>
      </div>
      
      <div id="done" class="shadow-sm col-sm-6 col-md-4 col-xl-3"> 
        <h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Done</h6>
      </div>
    
    </div> <!-- row -->
  </div> <!-- container -->

</main>


</body>

<script src="projects.js"></script>
<script>

function show_filter(){
  var category_dict = {};
  category_dict['all'] = 0 
  var selectors = [];
  $.each(projects, function(name, status) {
    $.each(status, function(i, item) {
      category_dict['all'] = category_dict['all'] + 1;
      $.each(item.category, function(i, cat) {
        category_dict[cat] = (category_dict[cat] || 0) + 1;
      });
    }); 
  });

  for (var key in category_dict) {
    if (category_dict.hasOwnProperty(key)) {
      selectors.push(key)
    }

  };

  $('#filter').empty()

  $.each(selectors.sort(), function(name, cat) {
    $('#filter').append('<input type="radio" class="btn-check" name="options" id="'+cat+'" autocomplete="off"/>');
    $('#filter').append('<label class="btn btn-primary-light btn-sm" for="'+cat+'">'+cat+' ('+ category_dict[cat]+')</label>');
  });

  $('#all').prop('checked', true);


};

function render(filter=['all']){

  $('#idea').html('<h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Idea</h6>');
  $('#in_progress').html('<h6 class="card-title text-uppercase text-truncate py-2 text-secondary">In Progress</h6>');
  $('#almost_done').html('<h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Almost Done</h6>');
  $('#done').html('<h6 class="card-title text-uppercase text-truncate py-2 text-secondary">Done</h6>');

  $.each(projects, function(name, status) {

    $.each(status, function(i, item) {
      var card = $("<div>", {"class": "card bg-light mt-2"});
      var card_body = $("<div>", {"class": "card-body"});
      var title = $("<h5>", {"class": "card-title"});
      title.text(item.title);
      card_body.append(title);
      var description = $("<p>", {"class": "card-text"});
      description.text(item.description);
      card_body.append(description);
      var link = $("<a>", {"class": "btn btn-primary btn-sm"});
      link.attr("href", item.link);
      link.attr("target", "_blank");
      link.text("Source code");
      card_body.append(link);
      var br = $("<br/>");
      card_body.append(br);

      var display = false;

      $.each(item.category.sort(), function(i, cat) {
        if (filter.includes('all')) { display = true; }; 
        if (filter.includes(cat)) { display = true; }; 

        var badge = $("<div>", {"class": "badge rounded-pill text-bg-light"});
        badge.text(cat);
        card_body.append(badge);

      });
      if (display){
        card.html(card_body);
        if (name == 'idea'){ $('#idea').append(card); };
        if (name == 'in_progress'){ $('#in_progress').append(card); };
        if (name == 'almost_done'){ $('#almost_done').append(card); };
        if (name == 'done'){ $('#done').append(card); };
      };
    });
  });
};


show_filter();
render();


$('#filter input').click(function(event) {
    render(event.target.id);
    // TODO: insert whatever you want to do with $(this) here
});






</script>
</html>